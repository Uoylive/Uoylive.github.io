<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[一年后的自己——忆]]></title>
    <url>%2F2019%2F10%2F13%2Fone-year-later-myself%2F</url>
    <content type="text"><![CDATA[一年了。 “写给一年后的自己”到了“未来”自己的手里，再回头看看“当时”的自己吧！ 我怎么就大三了呢，栾树花飘，桂香阵阵，就大三了。遥想大二当时，似乎也是在想：怎么就大二了呢。 这一年来，有什么变化吗？变宽了（//手动狗头） 攒够了钱买了单反，终于可以拍照了，拍下我的好看的花花；毕业规划由工作变成了读研，也没有再碰技术了，做的小程序也成“绝响”；六级没通过，准备六级多听听力，挂了vpn看看国外的月亮，习惯读读Reuters；…… 啊，关于今年的回忆还是放到年末吧。 似乎没有特别的事情，就这样吧，多学习多睡觉！]]></content>
      <categories>
        <category>杂文</category>
      </categories>
      <tags>
        <tag>life</tag>
        <tag>future</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[女孩子的可爱]]></title>
    <url>%2F2019%2F10%2F06%2F%E5%A5%B3%E5%AD%A9%E5%AD%90%2F</url>
    <content type="text"><![CDATA[要我说女孩子呀，各有各的漂亮法。 有的眉目清泠，像是一整季的雪水都融在了她的眼睛里。有的酒窝甜蜜，她笑一笑漫山遍野的风声都要消息。有的天生绵软，你朝她挨过去，像碰着了一团云。有的发汗时竟能生出浅浅的香气，散在天地间顿觉云销雨霁。 如何不漂亮呢？她若是瘦，你便看她伸懒腰时优雅得像天鹅抻颈。她若丰盈，你便看她日光底下肌肤亮起时有多绮丽。她若生斑，你便赞她漂亮得发光上帝这才在她的眼角鼻翼投下了淡淡的影。她若佝偻，你便赞她小小只多秀气刚刚好搂在怀里。你瞧，女孩子生来就漂亮得不讲道理。（转）]]></content>
      <categories>
        <category>杂文</category>
      </categories>
      <tags>
        <tag>女孩子</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[《我和我的祖国》]]></title>
    <url>%2F2019%2F10%2F03%2F%E3%80%8A%E6%88%91%E5%92%8C%E6%88%91%E7%9A%84%E7%A5%96%E5%9B%BD%E3%80%8B%2F</url>
    <content type="text"><![CDATA[观影《我和我的祖国》，两次泪目，多次被感动，对祖国的热爱滔滔不绝如江河，振奋了民族自豪感，温馨感动与欢乐并存。 第一次泪目是《前夜》，讲的是开国大典前夜林治远争分夺秒排除万难确保“万无一失”，使红旗稳定上升抵达停止。煽情在于旗杆顶的阻断球损坏，特殊材质无法找到，号召民众捐铬、镍等稀有金属重造阻断球，民众听说是开国大典的事，蜂拥而来。他们不知道什么是铬、镍，就把家里有金属的东西都拿来了，锅、眼睛框、收音机、长命锁，甚至是金条。当民众举起手里的“金属”，对收取的人员喊“这个是不是”，一声一声，汇成千万声，千千万万的人民呼唤着共和国的诞生，呼唤抗战28年流了千千万万的血获得的和平，我瞬间泪目，这泪流的值。 第二次泪目是第二幕——《相遇》。刚刚收拾好心情迎接第二幕，核弹研究人员高远不顾安危阻止裂变伸出了手，像极了斯罗达（撕开原子弹的加拿大科学家），这种牺牲精神一下子让我感动；而剧烈的辐射让他止不住的流血，医院里孤独一人家人因为保密工作都不知道这事。参加核弹研究前的对象在公车上发现了他，但是他不敢相认，因为要严格保密，任何地方都是“查无此人”，姑娘不相信自己认错了人，说起了从前，高远眼神里苦寂遮不住。下一刻，惊天的吼声纷飞的报纸告诉他——原子弹爆炸了，人群中，他接过报纸目光深深，姑娘发现他的注视目光，指着报纸他似乎点了点头，有如释重负，似乎这么多年都有了交代。他摘下了口罩，像揭开伪装，仰头看着天空，这人生——值了。我看到原子弹爆炸的蘑菇云，升腾的云气中有多少热血的青春，无数的岁月的奋斗、牺牲，这一刻都值了。 徐峥的《夺冠》，把如此的囧系列元素融入一部主旋律的电影中，而且毫不维和，不得不佩服徐峥。胡同、夏天、女排，小男孩和小女孩的怦然心动，加上八十年代的上海弄堂充满了烟火气。东东要把控天线让居民看女排夺冠，又想让即将出国的小美明白自己的心意，两头忙活，最后逼小男孩在爱国和爱情面前选择，令人捧腹。（汇成一句话，东东太难了）宁浩搭上葛大爷，《北京你好》欢快又深沉，奥运会和汶川地震交汇，四川娃想看看“我老汉修的栏杆”，大爷把好不容易得到的门票给了他，又让人难以笑出来。开头京腔的旋律欢快，中间郝云的民谣带来了回忆，欢快而不失意蕴，令人称奇。 其他三个片段就不如上面三个感受真切了，但依然不失水准值得一看。七个故事，中间通过一段用的笔写下某年某月发生某事的画面作为衔接。时代总是倏忽逝去，沧海桑田到了眼前也只是一瞬。纸上的文字把倏忽瞬间描绘，把沧海桑田作成首长诗。《我和我的祖国》用最低的角度拍出了最高的致敬。真正做到了从“我”出发，再去凸显“我的祖国”这个主题，从一个个小人物身上，结合一个个历史大事件，看到了我们祖国70年的沧桑巨变。最后刷一刷学校存在感！]]></content>
      <categories>
        <category>杂文</category>
      </categories>
      <tags>
        <tag>观后感</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[最近有点丧]]></title>
    <url>%2F2019%2F08%2F31%2F%E6%9C%80%E8%BF%91%E6%9C%89%E7%82%B9%E4%B8%A7%2F</url>
    <content type="text"><![CDATA[想要做的事情很多，但是不想动! 今天周末，下午去学习到了图书馆，晚上回来时下了雨，准备跑步的计划破产，淋湿了一路和老高打着电话，闲扯着。感觉最近不想动，到图书馆十多分钟的路程就仿佛很远，要做的事情有很多，但是又不想动。 锻炼：晚上跑步 实习：刷leetcode题库 摄影：西电官微团队 学习英语：看视频练习发音，听英文原著练感觉，每天看Reuters 六级没有考过，听力实在是烂，考研英语倒是不需要听力，但是阅读每天也要看提前准备一些。大三课程并不是特别多，五门专业基础课，课程都在早上，下午晚上都是空闲可安排时间（实验选修姑且不算），我还把创院的勤工助学推掉了。时间按说是不少，可是我抓不住它，不知不觉就溜走了。可能是开学吧，状态还没有调整过来，尽快调过来吧。 暑期开始前，我把几盆多肉放在了装着不少水的盆里，开学还担心它们会挂掉，到宿舍一看，盆里水已经没了残留一层藓类和污泥，多肉却活的很好，嫩绿的叶子生机勃勃，白鸟更是长大很多。 还有好几篇文章还没补上，图片还存着但文字一直没写，还是没找好心情和氛围去写。写这篇文章，其实也不想动的，在知乎上搜“丧”，看到了一个句子，很“应景”就有了心情，想写一写。 很长一段时间，我的生活看似马上开始了，真正的生活。可是总有一些障碍阻挡着，有些事情先解决，有些琐碎的工作 有待完成，时间貌似够用，还有一笔人情要去还清，然后生活就开始了吧。但是啊，最后我终于明白，这些障碍，正是我的生活。 年轻轻却没了活力，可不就是慢性死亡嘛，还是要找些事情做，找些意义去活动。也不知道要写些什么，原本的心情在写作中慢慢失去，情绪慢慢消散，已经不知道写了什么。似乎写完不丧了。]]></content>
      <categories>
        <category>杂文</category>
      </categories>
      <tags>
        <tag>life</tag>
        <tag>丧</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[mybatis转义字符]]></title>
    <url>%2F2019%2F08%2F24%2Fmybatis%E8%BD%AC%E4%B9%89%E5%AD%97%E7%AC%A6%2F</url>
    <content type="text"><![CDATA[报错： org.apache.ibatis.builder.BuilderException: Error creating document instance. Cause: org.xml.sax.SAXParseException: The content of elements must consist of well-formed character data or markup. 产生原因是因为在mybatis的sql语句中使用了小于号（‘&lt;’） 在sql语句中，不能直接用大于号、小于号等字符，应使用转义字符来替代 转义字符 原符号 含义 &amp;gt; &gt; 小于号 &amp;lt; &lt; 大于号 &amp;amp; &amp; 和 &amp;apos; ‘ 单引号 &amp;quot; “ 双引号 示例： 12转义前：SELECT * FROM test WHERE 1 = 1 AND start_date &lt;= CURRENT_DATE AND end_date &gt;= CURRENT_DATE 转义后：SELECT * FROM test WHERE 1 = 1 AND start_date &amp;lt;= CURRENT_DATE AND end_date &amp;gt;= CURRENT_DATE]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>mybatis</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[第一次坐飞机]]></title>
    <url>%2F2019%2F08%2F22%2F%E7%AC%AC%E4%B8%80%E6%AC%A1%E5%9D%90%E9%A3%9E%E6%9C%BA%2F</url>
    <content type="text"><![CDATA[阳光从侧后方照来，天空的云都变了模样,层峦起伏，叠嶂蔓延，仿佛早上的树林起了雾，多么美妙。 早上四点半起床，收拾完毕，哥哥驱车一个多小时到达萧山机场，路途中的太阳初升悬于地平线处，又大又圆红彤彤的，这里的天明确实早于家乡。等待区通过后，到达检票区，出示了电子机票，把手机照相机放进小框单独检查，安检人员开始搜身，对方真的很专业，动作轻柔而严谨接触频率极快，令我赞叹不已。之后到达登机口，出示机票后直接进入机舱内，整个流程用了二十分钟左右，很快。 机舱内的模样，感觉和火车舱差不多（除了空姐——笑容一直挂在脸上，服务很周全），一开始看到还有点小失望。 飞机发动大概6：40分钟左右，并不是机票上的6：45分，开动前地勤人员先把登机仓和其他东西移开，然后站到一侧，在开动时挥手告别而脸上都绽放着笑。飞机行进绕着轨道一周，等待前一架飞机起飞后终于要升空了。滑行速度不断加快，景物飞快地往后跑去，“嗡”，机头翘了起来，迎角产生，升力达到最大，起飞了。 并没有严重的失重感觉，如同电梯上升的一瞬，不过看到窗外的景物和飞机仰起的机身还是有点心虚，毕竟第一次到这么高。 它并没有一次性升到平流层，飞行到高空云层之下过了不久后再起提升，穿越云层到达指定飞行高度，而我也见到了被乌云遮住的闪耀太阳、湛蓝如洗的远空、白茫茫一片的云，真是好一幅胜景。 天空的云一向变幻莫测、千奇百态，从下放看是如此，未曾想从上空看也有此景，更甚于此。茫茫白雪似的平铺，树林似的起伏蔓延，还有河流似的蜿蜒，直令人大呼妙哉！ 下面是机上的早餐，饼叫什么倒是忘了但是味道还不错；右边是降落的照片，高空眺望城市。然后下机，旅行结束。 ending！]]></content>
      <categories>
        <category>杂文</category>
      </categories>
      <tags>
        <tag>life</tag>
        <tag>first</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Disney]]></title>
    <url>%2F2019%2F08%2F16%2FDisney%2F</url>
    <content type="text"><![CDATA[上海迪士尼乐园，一日游！ 迪士尼早上八点开园，我们坐地铁11号线要两小时，于是五点起床，赶上了第二班地铁，迎着朝阳前往迪士尼。 到达乐园排队处是8：04，人已经有很多了——非常多，我们站成一块一块的慢慢放进园内；接着沿着栏杆绕了三四分钟到了排队进园处，接着就是等待——走两步——等待，过了一会儿（其实也有二十分钟或者半小时的，为什么说是一会儿呢，因为和后面的等待相比这真的只是一会儿）轮到我们，他主要是为了检查包——是否有危险物品、饮料、零食等，通过之后到达取票-检票处。 到这里是8：32分，太阳已经升起，阳光开始炽热大地，我们也已经汗流浃背了，带的太阳伞起了作用，每排队列侧面会有一个大风扇吹着水雾带来不多的清凉。依然在排队，大概是半小时吧，通过检票处拿到门票正式进入迪士尼乐园。 打开地图（上海迪士尼度假区app还是很有用的），前往我们的第一个目的地——雷鸣山漂流，原本计划着这个排队的人比较多，而一早来人可能少一点可以节约一点时间，但实际上人依然很多，我们再此排队九十分钟。两个小朋友排队到一半已经快不行了，还没有玩上就排了这么长时间，开始抱怨；旁边一位阿姨看了看手机说，现在才开始排队需要三小时，这确实是一个热门项目。而我们一开始看到旁边的木栏隔开的一列就是到漂流点的，误以为人不多，加上看到了卖雨衣的，于是我们做了一个错误决定——提前穿上了准备好的雨衣，热了一路后来一位阿姨看不下去帮我们脱了下来，真是凉快不少。 等待到了尽头，穿上雨衣坐上漂流船（更像是一个大圆木筏），开始了漂流之旅——用旅似乎不严谨，因为只玩了五分钟左右。先随水前行一段路程，到了一个轨带把漂流伐转运上去，到了顶点后开始下滑，经历第一个下坡圆伐迅速下降并且还自旋，失重感加上溅起的水花使我们都大叫起来。不远处到了一个隧洞，顺水漂流眼前黑漆漆的，还有水滴落下来；突然，一声咆哮响起，在洞中回荡，滴答的水滴，奔腾的水流，眼前似乎变得恐怖起来了，手捏紧了扶栏。“嗷呜”，一个龙头陡然出现在我们头顶，晃动着硕大的头颅，咆哮声震震入耳，一个下坡恰如其分的到来，刺激和恐惧交织在心头。“哗”，出来了，光明涌现，到达了隧洞外，圆伐流速也慢了下来，缓缓而行到达了终点。两个小朋友还依依不舍，一同夸赞我的英明决策，这个实在是太好玩了。 接着我们去探险索道，排队五十分钟；飞越地平线，排队两个半小时，4D梦幻的游行，从阿尔卑斯山到远古丛林，从南极冰山到撒哈拉沙漠，从泰姬陵到埃菲尔铁塔，景色的变换配合座位的升降提供非同一般的观感；观看缤纷夏日巡游，迪士尼的动画人物一一现身，精美的衣服跳跃的舞蹈令人赞叹不已；吃午饭，一碗鸡汤面，味道一般价钱很贵；七个小矮人矿山车，等待135分钟，绕圈回环，很是刺激；船奇戏水滩，去船上看了一圈；加勒比海盗宝藏，等待二十分钟，甬长的排队区寥寥数人，我们奔跑过去等待了一会就开始玩耍，不排长队就是畅快，随着船行给我们讲了杰克船长的故事；然后去看晚上八点半的烟花表演，但是我们只看了十多分钟就离开了，因为有更好玩的项目等待着我们。 它就是“创极速光轮”。未来世界的科幻主题，摩托造型……算了，想不出来了，不想写了，你只要知道它很厉害，看起来很高科技，玩起来超刺激，八个圈绕下来挺吓人的，尖叫声刺耳，从上面图片看它的轨道会担心人会掉下来，实际上我在坐的时候也很担心，肾上腺素急速分泌特别爽快。 然后就没有然后了，一天结束，9：22分回程。 ending！]]></content>
      <categories>
        <category>杂文</category>
      </categories>
      <tags>
        <tag>life</tag>
        <tag>visit</tag>
        <tag>Disney</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[宝贝你好]]></title>
    <url>%2F2019%2F08%2F02%2Fbaby%2F</url>
    <content type="text"><![CDATA[（这是一封来自妈妈的信）2019-7-28今天是星期天，宝宝你已经有22周4天了。 今年夏天雨水很多，不像以往每年那么热，这几天是夏天中伏最热的时候，不知道为何今天妈妈心情很好，下午晚饭时刻终于变天了，迎来了一阵又一阵大暴雨，雨后总算凉快了一些。为了应付太热的前两天，新买的风扇也回来啦，不过下雨降了温，洗了澡并不需要吹风扇。 宝宝，你姥爷今天生意很好，你姥姥心情也不错。你小舅面试了家教并顺利通过。你小舅说他干点兼职赚钱给外甥买好吃的好玩的。宝宝，妈妈怀你实在不容易，孕早期孕吐厉害，坚持上班，每天饿的胃疼心慌，没一点胃口，不吃饿的浑身没劲，吃了又吐，吐的难受，最煎熬的是吐胆汁和半夜从熟睡中饿到抖醒。你爸爸特别担心我和你营养跟不上，喊你奶奶来杭州悉心照顾我20天。妈妈最难过的是怀孕期间两份工作都没了，目前你爸爸一个人承担所有的压力。 宝宝你四个多月，我终于熬过了早期孕吐。现在基本恢复了正常的食欲，能吃大多数东西了。妈妈从孕中期开始走路走多了腿脚肿胀，但是我体力还可以。原以为孕中晚期会轻松舒服一些，没想到最近浑身痒的难受，考虑到我亲爱的宝宝，作为孕妈妈不能乱吃药乱用药，我只能继续坚持。为了你宝宝，我得更加注意卫生，晚上洗澡时我把厕所和水池洗刷的干干净净，还把我当天穿的衣服洗了。 从6月8回你姥姥家，我的伙食都是姥姥来精心照管，我的衣服基本都是姥姥帮我洗，后面慢慢我可以自理了。从7月3开始我总想帮你姥姥做点什么，以前她自己做针线活和绣十字绣一点都不吃力，今年她眼睛视力下降很多，以前计划绣完的十字绣还剩一小半，我就拿出来帮她每天完成一点。你姥姥不知道你是男孩还是女孩，她在没干活的这段时间给你做了好多衣服和鞋子，你开心吗，到时随我们挑选。晚上临睡前看到贝店里的朋友一次性买了十罐奶粉，从妈妈开店一年来从没有这样的大单，净收入220，妈妈看到赚的零花钱格外开心。 宝宝是不是你在调皮了，妈妈感觉胎动比较少。你爸爸最近一直在非洲，对我们关心较少，你别怪你爸爸，你爸爸得辛苦工作给你更好的生活。我们都希望你健健康康，平平安安，开心快乐，聪明可爱！ 宝宝，我们爱你！]]></content>
      <categories>
        <category>杂文</category>
      </categories>
      <tags>
        <tag>baby</tag>
        <tag>成长记录</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[matlab双谱重构]]></title>
    <url>%2F2019%2F07%2F10%2Fmatlab%E5%8F%8C%E8%B0%B1%E9%87%8D%E6%9E%84%2F</url>
    <content type="text"><![CDATA[使用matlab分析图像的幅度谱和相位谱，并使用它们进行图像重构 原始图片见下方，代码如下： 1234567891011121314151617181920212223242526272829303132333435363738394041PA0=imread(&apos;Black_hole.jpg&apos;);PB0=imread(&apos;cloud.jpg&apos;);PC0=imread(&apos;flower.jpg&apos;);%图像灰度处理PA=rgb2gray(PA0);PB=rgb2gray(PB0);PC=rgb2gray(PC0);%调整图像大小一致[a,b]=size(PA);PB=imresize(PB,[a,b]);PC=imresize(PC,[a,b]);%傅里叶变换PAf=fft2(double(PA));PBf=fft2(double(PB));PCf=fft2(double(PC));% 获取幅度谱与相位谱PAf_AM=abs(PAf);PBf_AM=abs(PBf);PCf_AM=abs(PCf);PAf_ph=angle(PAf);PBf_ph=angle(PBf);PCf_ph=angle(PCf);%改变图片的幅度与相位，重组图像F1=PAf_AM.*cos(PBf_ph)+PAf_AM.*sin(PBf_ph).*1j;F2=PAf_AM.*cos(PCf_ph)+PAf_AM.*sin(PCf_ph).*1j;F3=PBf_AM.*cos(PAf_ph)+PBf_AM.*sin(PAf_ph).*1j;F4=PBf_AM.*cos(PCf_ph)+PBf_AM.*sin(PCf_ph).*1j;F5=PCf_AM.*cos(PAf_ph)+PCf_AM.*sin(PAf_ph).*1j;F6=PCf_AM.*cos(PBf_ph)+PCf_AM.*sin(PBf_ph).*1j;%傅里叶逆变换P1=abs(ifft2(F1));P2=abs(ifft2(F2));P3=abs(ifft2(F3));P4=abs(ifft2(F4));P5=abs(ifft2(F5));P6=abs(ifft2(F6));%显示图像figure(1)subplot(2,3,1);imshow(PA0,[]);title(&apos;A原图-黑洞&apos;);subplot(2,3,2);imshow(PB0,[]);title(&apos;B原图-云&apos;);subplot(2,3,3);imshow(PC0,[]);title(&apos;C原图-花&apos;);subplot(2,3,4);imshow(PA,[]);title(&apos;A灰度图-黑洞&apos;);subplot(2,3,5);imshow(PB,[]);title(&apos;B灰度图-云&apos;);subplot(2,3,6);imshow(PC,[]);title(&apos;C灰度图-花&apos;);figure(2)subplot(2,3,1);imshow(P1,[]);title(&apos;A幅度B相位&apos;);subplot(2,3,2);imshow(P2,[]);title(&apos;A幅度C相位&apos;);subplot(2,3,3);imshow(P3,[]);title(&apos;B幅度A相位&apos;);subplot(2,3,4);imshow(P4,[]);title(&apos;B幅度C相位&apos;);subplot(2,3,5);imshow(P5,[]);title(&apos;C幅度A相位&apos;);subplot(2,3,6);imshow(P6,[]);title(&apos;C幅度B相位&apos;); 结果如下： 结论：使用matlab读取三张图片，对图像进行傅里叶变换后获取图像的相位谱和幅度谱，分别使用一张图片的幅度谱与另外一张图片的相位谱进行重构图片，获得的新图像内容来源为相位谱的图像的轮廓，表明相位谱决定图像结构。 而图像的整体灰度分布的特性，则在比较大的程度上取决于对应的幅度谱，因为幅度谱反映了图像整体上多个方向的频率分量的相对强度。 ending！]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>matlab</tag>
        <tag>图像</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[栀子]]></title>
    <url>%2F2019%2F07%2F04%2Fjasmine%2F</url>
    <content type="text"><![CDATA[这是一捧花！只是单纯的一捧花，没别的了¯_(ツ)_/¯。]]></content>
      <categories>
        <category>摄影</category>
      </categories>
      <tags>
        <tag>flower</tag>
        <tag>photo</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[用尽全力过好一生]]></title>
    <url>%2F2019%2F07%2F03%2F%E7%94%A8%E5%B0%BD%E5%85%A8%E5%8A%9B%E8%BF%87%E5%A5%BD%E4%B8%80%E7%94%9F%2F</url>
    <content type="text"><![CDATA[《冥想》 把生命的突泉捧在我手里，我只觉得它来得新鲜，是浓烈的酒，清新的泡沫，注入我的奔波、劳作、冒险。仿佛前人从未经临的园地就要展现在我的面前。但如今，突然面对着坟墓，我冷眼向过去稍稍回顾，只见它曲折灌溉的悲喜都消失在一片亘古的荒漠，这才知道我的全部努力不过完成了普通的生活。]]></content>
      <categories>
        <category>杂文</category>
      </categories>
      <tags>
        <tag>life</tag>
        <tag>photo</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[浅谈VO、DTO、DO、PO概念区别用处]]></title>
    <url>%2F2019%2F06%2F15%2F%E6%B5%85%E8%B0%88VO%E3%80%81DTO%E3%80%81DO%E3%80%81PO%E6%A6%82%E5%BF%B5%E5%8C%BA%E5%88%AB%E7%94%A8%E5%A4%84%2F</url>
    <content type="text"><![CDATA[本篇文章主要谈论开发过程中经常会用到的一些对象：VO、DTO、DO和PO。上图是以一个时序图建立的简单模型来描述上述对象在三层架构应用中的位置 概念： VO（View Object）：视图对象，用于展示层，它的作用是把某个指定页面（或组件）的所有数据封装起来。DTO（Data Transfer Object）：数据传输对象，这个概念来源于J2EE的设计模式，原来的目的是为了EJB的分布式应用提供粗粒度的数据实体，以减少分布式调用的次数，从而提高分布式调用的性能和降低网络负载，但在这里，我泛指用于展示层与服务层之间的数据传输对象。DO（Domain Object）：领域对象，就是从现实世界中抽象出来的有形或无形的业务实体。PO（Persistent Object）：持久化对象，它跟持久层（通常是关系型数据库）的数据结构形成一一对应的映射关系，如果持久层是关系型数据库，那么，数据表中的每个字段（或若干个）就对应PO的一个（或若干个）属性。 VO与DTO的区别 大家可能会有个疑问（在笔者参与的项目中，很多程序员也有相同的疑惑）：既然DTO是展示层与服务层之间传递数据的对象，为什么还需要一个VO呢？对！对于绝大部分的应用场景来说，DTO和VO的属性值基本是一致的，而且他们通常都是POJO，因此没必要多此一举，但不要忘记这是实现层面的思维，对于设计层面来说，概念上还是应该存在VO和DTO，因为两者有着本质的区别，DTO代表服务层需要接收的数据和返回的数据，而VO代表展示层需要显示的数据。 用一个例子来说明可能会比较容易理解：例如服务层有一个getUser的方法返回一个系统用户，其中有一个属性是gender(性别)，对于服务层来说，它只从语义上定义：1-男性，2-女性，0-未指定，而对于展示层来说，它可能需要用“帅哥”代表男性，用“美女”代表女性，用“秘密”代表未指定。说到这里，可能你还会反驳，在服务层直接就返回“帅哥美女”不就行了吗？对于大部分应用来说，这不是问题，但设想一下，如果需求允许客户可以定制风格，而不同风格对于“性别”的表现方式不一样，又或者这个服务同时供多个客户端使用（不同门户），而不同的客户端对于表现层的要求有所不同，那么，问题就来了。再者，回到设计层面上分析，从职责单一原则来看，服务层只负责业务，与具体的表现形式无关，因此，它返回的DTO，不应该出现与表现形式的耦合。 理论归理论，这到底还是分析设计层面的思维，是否在实现层面必须这样做呢？一刀切的做法往往会得不偿失，下面我马上会分析应用中如何做出正确的选择。 VO与DTO的应用 上面只是用了一个简单的例子来说明VO与DTO在概念上的区别，本节将会告诉你如何在应用中做出正确的选择。 在以下才场景中，我们可以考虑把VO与DTO二合为一（注意：是实现层面）： 当需求非常清晰稳定，而且客户端很明确只有一个的时候，没有必要把VO和DTO区分开来，这时候VO可以退隐，用一个DTO即可，为什么是VO退隐而不是DTO？回到设计层面，服务层的职责依然不应该与展示层耦合，所以，对于前面的例子，你很容易理解，DTO对于“性别”来说，依然不能用“帅哥美女”，这个转换应该依赖于页面的脚本（如JavaScript）或其他机制（JSTL、EL、CSS） 即使客户端可以进行定制，或者存在多个不同的客户端，如果客户端能够用某种技术（脚本或其他机制）实现转换，同样可以让VO退隐 以下场景需要优先考虑VO、DTO并存： 上述场景的反面场景 因为某种技术原因，比如某个框架（如Flex）提供自动把POJO转换为UI中某些Field时，可以考虑在实现层面定义出VO，这个权衡完全取决于使用框架的自动转换能力带来的开发和维护效率提升与设计多一个VO所多做的事情带来的开发和维护效率的下降之间的比对。 如果页面出现一个“大视图”，而组成这个大视图的所有数据需要调用多个服务，返回多个DTO来组装（当然，这同样可以通过服务层提供一次性返回一个大视图的DTO来取代，但在服务层提供一个这样的方法是否合适，需要在设计层面进行权衡）。 DTO与DO的区别 首先是概念上的区别，DTO是展示层和服务层之间的数据传输对象（可以认为是两者之间的协议），而DO是对现实世界各种业务角色的抽象，这就引出了两者在数据上的区别，例如UserInfo和User（对于DTO和DO的命名规则，请参见笔者前面的一篇博文），对于一个getUser方法来说，本质上它永远不应该返回用户的密码，因此UserInfo至少比User少一个password的数据。而在领域驱动设计中，正如第一篇系列文章所说，DO不是简单的POJO，它具有领域业务逻辑。 DTO与DO的应用 从上一节的例子中，细心的读者可能会发现问题：既然getUser方法返回的UserInfo不应该包含password，那么就不应该存在password这个属性定义，但如果同时有一个createUser的方法，传入的UserInfo需要包含用户的password，怎么办？在设计层面，展示层向服务层传递的DTO与服务层返回给展示层的DTO在概念上是不同的，但在实现层面，我们通常很少会这样做（定义两个UserInfo，甚至更多），因为这样做并不见得很明智，我们完全可以设计一个完全兼容的DTO，在服务层接收数据的时候，不该由展示层设置的属性（如订单的总价应该由其单价、数量、折扣等决定），无论展示层是否设置，服务层都一概忽略，而在服务层返回数据时，不该返回的数据（如用户密码），就不设置对应的属性。 对于DO来说，还有一点需要说明：为什么不在服务层中直接返回DO呢？这样可以省去DTO的编码和转换工作，原因如下： 两者在本质上的区别可能导致彼此并不一一对应，一个DTO可能对应多个DO，反之亦然，甚至两者存在多对多的关系。 DO具有一些不应该让展示层知道的数据 DO具有业务方法，如果直接把DO传递给展示层，展示层的代码就可以绕过服务层直接调用它不应该访问的操作，对于基于AOP拦截服务层来进行访问控制的机制来说，这问题尤为突出，而在展示层调用DO的业务方法也会因为事务的问题，让事务难以控制。 对于某些ORM框架（如Hibernate）来说，通常会使用“延迟加载”技术，如果直接把DO暴露给展示层，对于大部分情况，展示层不在事务范围之内（Open session in view在大部分情况下不是一种值得推崇的设计），如果其尝试在Session关闭的情况下获取一个未加载的关联对象，会出现运行时异常（对于Hibernate来说，就是LazyInitiliaztionException）。 从设计层面来说，展示层依赖于服务层，服务层依赖于领域层，如果把DO暴露出去，就会导致展示层直接依赖于领域层，这虽然依然是单向依赖，但这种跨层依赖会导致不必要的耦合。 对于DTO来说，也有一点必须进行说明，就是DTO应该是一个“扁平的二维对象”，举个例子来说明：如果User会关联若干个其他实体（例如Address、Account、Region等），那么getUser()返回的UserInfo，是否就需要把其关联的对象的DTO都一并返回呢？如果这样的话，必然导致数据传输量的大增，对于分布式应用来说，由于涉及数据在网络上的传输、序列化和反序列化，这种设计更不可接受。如果getUser除了要返回User的基本信息外，还需要返回一个AccountId、AccountName、RegionId、RegionName，那么，请把这些属性定义到UserInfo中，把一个“立体”的对象树“压扁”成一个“扁平的二维对象”，笔者目前参与的项目是一个分布式系统，该系统不管三七二十一，把一个对象的所有关联对象都转换为相同结构的DTO对象树并返回，导致性能非常的慢。 DO与PO的区别 DO和PO在绝大部分情况下是一一对应的，PO是只含有get/set方法的POJO，但某些场景还是能反映出两者在概念上存在本质的区别： DO在某些场景下不需要进行显式的持久化，例如利用策略模式设计的商品折扣策略，会衍生出折扣策略的接口和不同折扣策略实现类，这些折扣策略实现类可以算是DO，但它们只驻留在静态内存，不需要持久化到持久层，因此，这类DO是不存在对应的PO的。 同样的道理，某些场景下，PO也没有对应的DO，例如老师Teacher和学生Student存在多对多的关系，在关系数据库中，这种关系需要表现为一个中间表，也就对应有一个TeacherAndStudentPO的PO，但这个PO在业务领域没有任何现实的意义，它完全不能与任何DO对应上。这里要特别声明，并不是所有多对多关系都没有业务含义，这跟具体业务场景有关，例如：两个PO之间的关系会影响具体业务，并且这种关系存在多种类型，那么这种多对多关系也应该表现为一个DO，又如：“角色”与“资源”之间存在多对多关系，而这种关系很明显会表现为一个DO——“权限”。 某些情况下，为了某种持久化策略或者性能的考虑，一个PO可能对应多个DO，反之亦然。例如客户Customer有其联系信息Contacts，这里是两个一对一关系的DO，但可能出于性能的考虑（极端情况，权作举例），为了减少数据库的连接查询操作，把Customer和Contacts两个DO数据合并到一张数据表中。反过来，如果一本图书Book，有一个属性是封面cover，但该属性是一副图片的二进制数据，而某些查询操作不希望把cover一并加载，从而减轻磁盘IO开销，同时假设ORM框架不支持属性级别的延迟加载，那么就需要考虑把cover独立到一张数据表中去，这样就形成一个DO对应对个PO的情况。 PO的某些属性值对于DO没有任何意义，这些属性值可能是为了解决某些持久化策略而存在的数据，例如为了实现“乐观锁”，PO存在一个version的属性，这个version对于DO来说是没有任何业务意义的，它不应该在DO中存在。同理，DO中也可能存在不需要持久化的属性。 DO与PO的应用 由于ORM框架的功能非常强大而大行其道，而且JavaEE也推出了JPA规范，现在的业务应用开发，基本上不需要区分DO与PO，PO完全可以通过JPA，Hibernate Annotations/hbm隐藏在DO之中。虽然如此，但有些问题我们还必须注意： 对于DO中不需要持久化的属性，需要通过ORM显式的声明，如：在JPA中，可以利用@Transient声明。 对于PO中为了某种持久化策略而存在的属性，例如version，由于DO、PO合并了，必须在DO中声明，但由于这个属性对DO是没有任何业务意义的，需要让该属性对外隐藏起来，最常见的做法是把该属性的get/set方法私有化，甚至不提供get/set方法，但对于Hibernate来说，这需要特别注意，由于Hibernate从数据库读取数据转换为DO时，是利用反射机制先调用DO的空参数构造函数构造DO实例，然后再利用JavaBean的规范反射出set方法来为每个属性设值，如果不显式声明set方法，或把set方法设置为private，都会导致Hibernate无法初始化DO，从而出现运行时异常，可行的做法是把属性的set方法设置为protected。 对于一个DO对应多个PO，或者一个PO对应多个DO的场景，以及属性级别的延迟加载，Hibernate都提供了很好的支持，请参考Hibnate的相关资料。 到目前为止，相信大家都已经比较清晰的了解VO、DTO、DO、PO的概念、区别和实际应用了。通过上面的详细分析，我们还可以总结出一个原则：分析设计层面和实现层面完全是两个独立的层面，即使实现层面通过某种技术手段可以把两个完全独立的概念合二为一，在分析设计层面，我们仍然（至少在头脑中）需要把概念上独立的东西清晰的区分开来，这个原则对于做好分析设计非常重要。转载：https://www.cnblogs.com/qixuejia/p/4390086.html]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>spring boot</tag>
        <tag>开发</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[月]]></title>
    <url>%2F2019%2F06%2F15%2Fmoon%2F</url>
    <content type="text"><![CDATA[今晚月色真好！ 图片拍摄于6.月14日，农历为12日，当晚月亮正处于宿舍楼围起来的一方天空，月相处于上弦月至满月之间，唤为凸月。 使用iso-200，f/5.6,曝光1/320s得到这一张图片，发给同学，同学说周围太黑了，从手机上看不出图片边界了。我测了一下RGB，完全是#000000的纯黑。 附上判断弦月的月相歌： 初一新月不可见，只缘身陷日地中。初七初八上弦月，半轮圆月面朝西。满月出在十五六，地球一肩挑日月。二十二三下弦月，月面朝东下半夜。]]></content>
      <categories>
        <category>摄影</category>
      </categories>
      <tags>
        <tag>photo</tag>
        <tag>月</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[lovePea]]></title>
    <url>%2F2018%2F10%2F04%2FlovePea%2F</url>
    <content type="text"><![CDATA[红豆的红是丹心红 红豆的豆是相思果 红豆，又名相思子或者相思豆，在中国文学中被当作思念的象征。但是红豆有好几种，维基百科里越橘、孔雀豆、鸡母珠等都被当为红豆，王维的相思诗中指的是似乎是鸡母珠。文中的图是南山竹的果实，也是圆圆的红色的，是我高中时种的盆栽结果后拍的图片。 “玲珑骰子安红豆，入骨相思知不知”，温庭筠的诗也写出了极致的相思，读之慨然。我曾经做过“玲珑骰子”（为了爱情），用菩提子打磨成方块，再用小钻取孔，做成骰子样式，然后把红豆塞进去，此之谓淘宝的“玲珑骰子”。 相思红豆生南国，春来发几枝。愿君多采撷，此物最相思。]]></content>
      <categories>
        <category>杂文</category>
      </categories>
      <tags>
        <tag>photo</tag>
        <tag>红豆</tag>
      </tags>
  </entry>
</search>
